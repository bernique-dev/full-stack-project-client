<div class="container vw-100 col-md-10 mt-2" *ngIf="shops && categories && isModifying != undefined">
  <form [formGroup]="productForm" class="form-outline">
    <div class="d-inline-flex w-100 gap-2 align-content-stretch mb-2">
      <input class="form-control"
             required type="text"
             [ngClass]="{ 'is-valid' : productForm.get('productName')!.valid, 'is-invalid' : productForm.get('productName')!.invalid }"
             minlength="5" formControlName="productName" placeholder="Name" value="test"
      />
      <div>
        <div *ngIf="productForm.get('productName')!.invalid">
          Name must be at least 5 characters long.
        </div>
      </div>
      <ngx-bootstrap-multiselect class="multi-select" [options]="categories"
                                 [settings]="mySettings" formControlName="productCategories"
                                 (added)="sortFormCategories()">
      </ngx-bootstrap-multiselect>

      <div ngbDropdown>
        <button type="button" class="btn btn-primary text-truncate" id="dropdownBasic1" ngbDropdownToggle [value]="productForm.controls['productShop']!.value">
          {{productForm.value.productShop.name}}
        </button>
        <div ngbDropdownMenu aria-labelledby="dropdownBasic1" >
          <button ngbDropdownItem  *ngFor="let shop of shops"
                  (click)="productForm.controls['productShop'].setValue(shop)">{{shop.name}}</button>
        </div>
      </div>

    </div>


    <textarea class="form-control mb-2" type="textarea" name="productDescription"
              placeholder="Description"
              [ngClass]="{ 'is-valid' : productForm.get('productDescription')!.valid, 'is-invalid' : productForm.get('productDescription')!.invalid }"
              rows="10" formControlName="productDescription"></textarea>

    <input class="form-control mb-2" type="number" name="productPrice" placeholder="Price"
           [ngClass]="{ 'is-valid' : productForm.get('productPrice')!.valid, 'is-invalid' : productForm.get('productPrice')!.invalid }"
           min="0"
           formControlName="productPrice"/>

    <input class="btn btn-primary form-control" type="submit" value="{{ isModifying ? 'Modify' : 'Create' }}"
           [disabled]="productForm.invalid"
           (click)="isModifying ? modifyProduct(productId) : createProduct()">
  </form>

  <h3>Preview</h3>
  <div class="row p-2 bg-white border rounded vw-75" *ngIf="shops && categories && true">
    <div class="col-md-9 mt-0">
      <h5 class="text-truncate">{{productForm.value.productName}}</h5>
      <div class="mt-1 mb-1 spec-1">
        <ng-container *ngFor="let category of productForm.value.productCategories; let categoryIndex = index">
          <span>{{ categories[category-1].name }}</span>
          <span *ngIf="categoryIndex < productForm.value.productCategories.length - 1 " class="dot"></span>
        </ng-container>
      </div>
      <p class="text-justify text-truncate para mb-0">{{productForm.value.productDescription}}</p>
    </div>
    <div class="align-items-center align-content-center justify-item-center col-md-3 border-left mt-1">
      <div class="d-flex flex-row justify-content-center align-items-center">
        <h4>${{productForm.value.productPrice}}</h4>
      </div>
      <div class="d-flex flex-row justify-content-center align-items-center text-truncate">
        <h5>{{ productForm.value.productShop.name }}</h5>
      </div>
      <div class="d-flex flex-column">
        <span class="btn btn-primary btn-sm btn-primary">Details</span>
      </div>
    </div>
  </div>

</div>
